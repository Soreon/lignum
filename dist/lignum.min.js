!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Lignum",[],t):"object"==typeof exports?exports.Lignum=t():e.Lignum=t()}(window,(function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var c=t[i]={i:i,l:!1,exports:{}};return e[i].call(c.exports,c,c.exports,n),c.l=!0,c.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var c in e)n.d(i,c,function(t){return e[t]}.bind(null,c));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function c(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.r(t),n.d(t,"default",(function(){return a}));var a=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r(this,"container",null),r(this,"data",null),r(this,"options",null),this.updateContainer(t),n&&(this.options=n),i&&(this.data=i,this.generate(this.container,this.data))}return c(e,[{key:"hasCheckbox",get:function(){return this.options&&!0===this.options.checkbox}},{key:"onLabelClick",get:function(){return this.options&&this.option?this.options.labelClick:null}},{key:"onImgClick",get:function(){return this.options&&this.option?this.options.imgClick:null}}]),c(e,[{key:"emitEvent",value:function(e,t){var n=document.createEvent("HTMLEvents");n.initEvent(t,!1,!0),console.log(t,e),e.dispatchEvent(n)}},{key:"checkChildren",value:function(e){var t=e.querySelector(".lignum-node-children");if(t)for(var n=t.querySelectorAll("input[type=checkbox]"),i=e.querySelector("input[type=checkbox]"),c=0;c<n.length;c+=1)n[c].checked===i.checked&&!1===n[c].indeterminate||this.emitEvent(n[c],"change"),n[c].checked=i.checked,n[c].indeterminate=!1,n[c].indeterminate?this.emitEvent(n[c],"indeterminate"):n[c].checked?this.emitEvent(n[c],"checked"):this.emitEvent(n[c],"unchecked");this.refreshAncestors(e)}},{key:"refreshAncestors",value:function(e){var t=e.parentNode.parentNode;if(t.classList.contains("lignum-node")){for(var n=t.querySelector("input[type=checkbox]"),i=t.querySelector(".lignum-node-children").querySelectorAll(":scope .lignum-node"),c=!0,r=!1,a=!1,o=0;o<i.length;o+=1){var l=i[o].querySelector("input[type=checkbox]");c&=l.checked,r|=l.checked,a|=l.indeterminate}var d=a||!c&&r,s=c;d===n.indeterminate&&s===n.checked||this.emitEvent(n,"change"),n.indeterminate=d,n.checked=s,d?this.emitEvent(n,"indeterminate"):s?this.emitEvent(n,"checked"):this.emitEvent(n,"unchecked"),this.refreshAncestors(t)}}},{key:"updateContainer",value:function(e){if("string"!=typeof e)throw new Error("Wrong format for the container's id");if(this.container=document.querySelector(e),!this.container)throw new Error("Cannot find the container ".concat(e));this.emitEvent(this.container,"containerUpdated")}},{key:"updateData",value:function(e){this.data=e,this.emitEvent(this.container,"dataUpdated")}},{key:"refresh",value:function(){this.generate(this.container,this.data),this.emitEvent(this.container,"treeRefreshed")}},{key:"generate",value:function(e,t){var n=this;if(!Array.isArray(t))throw new Error("Data is not an array");e.innerHTML="",e.classList.add("lignum-container");var i=document.createElement("div");i.classList.add("lignum-node-vertical-dotted-line"),e.appendChild(i);for(var c=function(i){var c=t[i],r=c.children&&c.children.length>0,a=c.img&&c.img.length>0,o=document.createElement("div");o.classList.add("lignum-node-horizontal-dotted-line");var l=document.createElement("button");l.classList.add("lignum-node-button"),l.innerText="+";var d=null;if(n.hasCheckbox)switch((d=document.createElement("input")).type="checkbox",d.classList.add("lignum-node-checkbox"),c.checkboxState){case"unchecked":d.checked=!1;break;case"indeterminate":d.indeterminate=!0;break;case"checked":default:d.checked=!0}var s=null;a&&((s=document.createElement("img")).classList.add("lignum-node-img"),s.src=c.img);var u=document.createElement("span");u.classList.add("lignum-node-label"),n.hasCheckbox||r||u.classList.add("lignum-node-naked-label"),u.innerText=c.name;var h=document.createElement("div");h.classList.add("lignum-node-ui");for(var m=0;c.data&&m<c.data.length;m+=1){var f=c.data[m],p=f.key,g=f.value;h.dataset[p]=g}r||h.classList.add("childless"),h.appendChild(o),r&&h.appendChild(l),n.hasCheckbox&&h.appendChild(d),a&&h.appendChild(s),h.appendChild(u);var k=document.createElement("div");k.classList.add("lignum-node-children"),r&&n.generate(k,c.children);var v=document.createElement("div");v.classList.add("lignum-node"),"open"!==c.nodeState&&v.classList.add("close"),v.appendChild(h),r&&v.appendChild(k),l.addEventListener("click",(function(e){l.innerText="+"===l.innerText?"-":"+",v.classList.toggle("close"),c.nodeState=v.classList.contains("close")?"close":"open",n.emitEvent(e.target,v.classList.contains("close")?"close":"open"),n.emitEvent(e.target,"change")})),n.hasCheckbox&&d.addEventListener("click",(function(e){e.target.indeterminate?(c.checkboxState="indeterminate",n.emitEvent(e.target,"indeterminate")):e.target.checked?(c.checkboxState="checked",n.emitEvent(e.target,"checked")):(c.checkboxState="unchecked",n.emitEvent(e.target,"unchecked")),n.emitEvent(e.target,"change"),n.checkChildren(e.target.parentElement.parentElement)})),u.addEventListener("click",(function(){"toggleCheckbox"===n.onLabelClick?d.click():"toggleWrap"===n.onLabelClick&&l.click()})),a&&s.addEventListener("click",(function(){"toggleCheckbox"===n.onImgClick?d.click():"toggleWrap"===n.onImgClick&&l.click()})),e.appendChild(v)},r=0;r<t.length;r+=1)c(r)}}]),e}()}]).Lignum}));